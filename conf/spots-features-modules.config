params {
    spots_counts_cores   = 1
    spots_counts_mem_gb  = 2
    spots_props_cores    = 1
    spots_props_mem_gb   = 2
    labels_timeindex     = '0'
    labels_channel       = '0'
    spots_counts_pattern = '*coord*.csv'
    spots_counts_subdir  = 'spots-counts'
    spots_props_subdir   = 'spots-props'
    skip_spots_counts    = false
    skip_region_props    = false
    dapi_channel         = ''
    bleeding_channel     = ''
}

process {

    withName: "(.*)?SPOTS_STATS:SPOTS_COUNTS" {
        container = 'ghcr.io/janeliascicomp/easifish-spots-utils:v1.1-ome'

        ext.args = [
            optional_arg_value('--timeindex', params.labels_timeindex),
            optional_arg_value('--channel', params.labels_channel),
        ].join(' ')
    }

}

def optional_arg_value(arg_flag, arg_value) {
    arg_value ? "${arg_flag}=${arg_value}" : ''
}
